<form>
  <div class="row">
    <h2 class="col-sm-6">Build</h2>
  </div>
  <div class="form-row">
    <div class="col-lg-4 mb-3">
      <label>Selected Build</label>
      <div class="input-group input-group-sm">
        <select class="form-control" (change)="currentScore = +score.value; currentIndex = 0" #score>
          <option *ngIf="scores.length == 0">None</option>
          <option *ngFor="let key of scores; index as idx" [value]="key">{{ key | percent:'2.2-2' }}
            [{{ builds[key].length }}]</option>
        </select>
        <div class="btn-group btn-group-sm">
          <button type="button" class="btn btn-secondary" (click)="previousIndex($event)">&lt;</button>
          <button type="button" class="btn btn-secondary" id="indexed-button">{{ currentIndex + 1 }}</button>
          <button type="button" class="btn btn-secondary" (click)="nextIndex($event)">&gt;</button>
        </div>
      </div>
    </div>
  </div>
</form>

<ng-template [ngIf]="!currentScore">
  <p class="lead">Submit a Scenario to find a build score.</p>
</ng-template>

<ng-template [ngIf]="currentScore">
  <table class="table">
    <tr>
      <th width=40%>Name</th>
      <th width=20%>Type</th>
      <th width=20%>Tier</th>
      <th width=20%>Place</th>
    </tr>
    <tr *ngFor="let slot of ['helmet','chestplate','leggings','boots','offhand']">
      <td>{{ getBuild(currentScore, currentIndex)[slot]['Name'] }}</td>
      <td>{{ getBuild(currentScore, currentIndex)[slot]['Type'] }}</td>
      <td>{{ getBuild(currentScore, currentIndex)[slot]['Tier'] }}</td>
      <td>{{ getBuild(currentScore, currentIndex)[slot]['Place'] }}</td>
    </tr>
  </table>

  <table class="table" id="buildScores">
    <tr>
      <th width=14.2%>Armor</th>
      <th width=14.2%>Toughness</th>
      <th width=14.2%>Protection</th>
      <th width=14.2%>Evasion</th>
      <th width=14.2%>Regeneration</th>
      <th width=14.2%>Health</th>
      <th>Percent Speed</th>
    </tr>
    <tr>
      <td>{{ getScores(currentScore, currentIndex)['armor'] }}</td>
      <td>{{ getScores(currentScore, currentIndex)['toughness'] }}</td>
      <td>{{ getScores(currentScore, currentIndex)['protection'] }}</td>
      <td>{{ getScores(currentScore, currentIndex)['evasion'] }}</td>
      <td>{{ getScores(currentScore, currentIndex)['regeneration'] }}</td>
      <td>{{ getScores(currentScore, currentIndex)['health'] }}</td>
      <td>{{ (getScores(currentScore, currentIndex)['speed_percent'] - 1) > 0 ? '+' : '' }} {{ (getScores(currentScore, currentIndex)['speed_percent'] - 1) | percent:'2.2' }}</td>
    </tr>
  </table>
</ng-template>
